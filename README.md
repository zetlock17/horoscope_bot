# Документация проекта: Телеграм-бот "Горосглык"

## Оглавление
1. [Введение](#введение)
2. [Функциональность](#функциональность)
3. [Структура проекта](#структура-проекта)
   - [Зависимости](#зависимости)
   - [Основные функции](#основные-функции)
4. [Описание работы бота](#описание-работы-бота)
   - [Запуск бота](#запуск-бота)
   - [Команды](#команды)
   - [Получение гороскопа](#получение-гороскопа)
5. [Файловая система](#файловая-система)
6. [Заключение](#заключение)

---

## Введение

Телеграм-бот "Горосглык" — это бот, который предоставляет пользователям ежедневные гороскопы для всех знаков зодиака. Бот использует данные с сайта [Horo.mail.ru](https://horo.mail.ru) для получения актуальных предсказаний. Проект написан на Python с использованием библиотеки `python-telegram-bot` для взаимодействия с Telegram API и библиотеки `BeautifulSoup` для парсинга веб-страниц.

---

## Функциональность

- **Получение гороскопа:** Пользователь может запросить гороскоп для любого из 12 знаков зодиака.
- **Удобный интерфейс:** Бот предоставляет клавиатуру с кнопками для быстрого выбора знака зодиака.
- **Перевод названий знаков:** Названия знаков зодиака отображаются на русском языке.
- **Обработка ошибок:** Бот корректно обрабатывает ошибки при получении данных с сайта и уведомляет пользователя.

---

## Структура проекта

### Зависимости

Для работы бота необходимы следующие библиотеки:
- `python-telegram-bot` — для взаимодействия с Telegram API.
- `requests` — для отправки HTTP-запросов.
- `beautifulsoup4` — для парсинга HTML-страниц.
- `python-dotenv` — для загрузки переменных окружения (токен бота).

Установите зависимости с помощью команды:
```bash
pip install python-telegram-bot requests beautifulsoup4 python-dotenv
```

---

### Основные функции

1. **`get_horoscope(sign: str) -> str`**  
   Получает гороскоп для указанного знака зодиака с сайта Horo.mail.ru.  
   - `sign` — название знака зодиака на английском языке (например, `aries`).  
   - Возвращает текст гороскопа или сообщение об ошибке.

2. **`format_horoscope(sign: str, horoscope: str) -> str`**  
   Форматирует текст гороскопа, добавляя название знака зодиака на русском языке.  
   - `sign` — название знака зодиака на английском языке.  
   - `horoscope` — текст гороскопа.  
   - Возвращает отформатированное сообщение.

3. **`start(update: Update, context: ContextTypes.DEFAULT_TYPE)`**  
   Обрабатывает команду `/start`. Выводит приветственное сообщение и клавиатуру с кнопками для выбора знака зодиака.

4. **`horoscope(update: Update, context: ContextTypes.DEFAULT_TYPE, sign: str)`**  
   Обрабатывает запрос гороскопа для указанного знака зодиака.  
   - `sign` — название знака зодиака на английском языке.

5. **`help_command(update: Update, context: ContextTypes.DEFAULT_TYPE)`**  
   Обрабатывает команду `/help`. Выводит список доступных команд.

6. **`unknown_command(update: Update, context: ContextTypes.DEFAULT_TYPE)`**  
   Обрабатывает неизвестные команды. Уведомляет пользователя о необходимости использовать `/help`.

---

## Описание работы бота

### Запуск бота

1. Создайте файл `.env` в корневой директории проекта и добавьте в него токен вашего бота:
   ```plaintext
   TELEGRAM_TOKEN=ваш_токен
   ```

2. Запустите бота с помощью команды:
   ```bash
   python main.py
   ```

---

### Команды

- **`/start`** — запускает бота и выводит клавиатуру с кнопками для выбора знака зодиака.
- **`/help`** — выводит список доступных команд.
- **`/horoscope_<sign>`** — возвращает гороскоп для указанного знака зодиака.  
  Например: `/horoscope_aries`, `/horoscope_taurus`.

---

### Получение гороскопа

1. Пользователь выбирает знак зодиака с помощью команды или кнопки на клавиатуре.
2. Бот отправляет запрос на сайт Horo.mail.ru для получения гороскопа.
3. Если данные успешно получены, бот отправляет отформатированный гороскоп пользователю.
4. В случае ошибки бот уведомляет пользователя о проблеме.

---

## Файловая система

- **`.env`**  
  Содержит переменные окружения, такие как токен бота.

- **`main.py`**  
  Основной файл проекта, содержащий весь код бота.

---

## Заключение

Телеграм-бот "Горосглык" — это удобный инструмент для получения ежедневных гороскопов. Бот прост в использовании и предоставляет актуальную информацию благодаря интеграции с сайтом Horo.mail.ru. Проект может быть расширен за счет добавления новых функций, таких как отправка гороскопов по расписанию или поддержка дополнительных языков.
